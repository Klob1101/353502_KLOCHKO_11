<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebSite">
<head>
    <!-- Meta Information for SEO and Accessibility -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Primary Meta Tags -->
    <title>{% block title %}HeavyShop - Your Premier Bookstore{% endblock %}</title>
    <meta name="title" content="{% block meta_title %}HeavyShop - Your Premier Bookstore{% endblock %}">
    <meta name="description" content="{% block meta_description %}Discover thousands of books at HeavyShop. From classics to contemporary works, find your next great read with fast delivery and excellent customer service.{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}books, bookstore, literature, novels, education, reading, online books, belarus{% endblock %}">
    <meta name="author" content="HeavyShop Team">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="{% block og_type %}website{% endblock %}">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:title" content="{% block og_title %}HeavyShop - Your Premier Bookstore{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Discover thousands of books at HeavyShop{% endblock %}">
    <meta property="og:image" content="{% block og_image %}{{ request.scheme }}://{{ request.get_host }}/static/images/logo-og.png{% endblock %}">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="HeavyShop">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ request.build_absolute_uri }}">
    <meta property="twitter:title" content="{% block twitter_title %}HeavyShop - Your Premier Bookstore{% endblock %}">
    <meta property="twitter:description" content="{% block twitter_description %}Discover thousands of books at HeavyShop{% endblock %}">
    <meta property="twitter:image" content="{% block twitter_image %}{{ request.scheme }}://{{ request.get_host }}/static/images/logo-twitter.png{% endblock %}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon-16x16.png">
    <link rel="manifest" href="/static/manifest.json">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "HeavyShop",
        "url": "{{ request.scheme }}://{{ request.get_host }}",
        "logo": "{{ request.scheme }}://{{ request.get_host }}/static/images/logo.png",
        "description": "Premier online bookstore in Belarus offering thousands of books with fast delivery",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "ул. Примерная, д. 123",
            "addressLocality": "Минск",
            "addressCountry": "BY"
        },
        "telephone": "+375-17-123-45-67",
        "email": "info@heavyshop.by"
    }
    </script>
    
    {% block structured_data %}{% endblock %}
    
    <!-- Stylesheets -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    <style>
        /* Custom CSS for semantic elements */
        body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            color: #333;
        }
        
        .site-header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .site-nav {
            background: rgba(255,255,255,0.1);
        }
        
        .main-content {
            min-height: 60vh;
            padding: 2rem 0;
        }
        
        .site-footer {
            background: #2c3e50;
            color: white;
            margin-top: 4rem;
        }
        
        .breadcrumb-nav {
            background: #f8f9fa;
            padding: 0.75rem 0;
        }
        
        .book-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        .rating-stars {
            color: #ffc107;
        }
        
        .price-tag {
            font-weight: bold;
            color: #e74c3c;
            font-size: 1.25rem;
        }
        
        .semantic-list {
            counter-reset: item-counter;
        }
        
        .semantic-list li {
            counter-increment: item-counter;
        }
        
        .semantic-list li::marker {
            content: counter(item-counter) ". ";
            font-weight: bold;
            color: #3498db;
        }
        
        .highlight-text {
            background: linear-gradient(120deg, #a8e6cf 0%, #dcedc8 100%);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
        }
        
        .definition {
            border-left: 4px solid #3498db;
            padding-left: 1rem;
            font-style: italic;
        }
        
        .abbreviation {
            text-decoration: underline dotted;
            cursor: help;
        }
        
        .citation {
            font-style: italic;
            border-left: 3px solid #95a5a6;
            padding-left: 1rem;
            margin: 1rem 0;
        }
        
        .poem {
            font-family: 'Times New Roman', serif;
            line-height: 1.8;
            margin: 1.5rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                padding: 1rem 0;
            }
            
            .site-header h1 {
                font-size: 1.5rem;
            }
        }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>

<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>
    
    <!-- Site Header -->
    <header class="site-header" role="banner">
        <div class="container">
            <div class="row align-items-center py-3">
                <div class="col-md-3">
                    <!-- Company Logo -->
                    <h1 class="h3 mb-0">
                        <a href="{% url 'books:home' %}" class="text-white text-decoration-none">
                            <i class="bi bi-book"></i>
                            <span>HeavyShop</span>
                        </a>
                    </h1>
                </div>
                
                <div class="col-md-6">
                    <!-- Search Form -->
                    <form action="{% url 'books:book_list' %}" method="get" role="search" class="d-flex">
                        <input type="search" 
                               name="search" 
                               placeholder="Search books, authors, ISBN..." 
                               class="form-control me-2"
                               aria-label="Search books">
                        <button type="submit" class="btn btn-light" aria-label="Search">
                            <i class="bi bi-search"></i>
                        </button>
                    </form>
                </div>
                
                <div class="col-md-3 text-end">
                    <!-- User Actions -->
                    {% if user.is_authenticated %}
                        <div class="dropdown">
                            <button class="btn btn-outline-light dropdown-toggle" 
                                    type="button" 
                                    data-bs-toggle="dropdown" 
                                    aria-expanded="false">
                                <i class="bi bi-person"></i>
                                {{ user.username }}
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="{% url 'users:profile' %}">Profile</a></li>
                                <li><a class="dropdown-item" href="{% url 'books:order_list' %}">My Orders</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
                            </ul>
                        </div>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn btn-outline-light me-2">Login</a>
                        <a href="{% url 'users:register' %}" class="btn btn-light">Register</a>
                    {% endif %}
                    
                    <!-- Shopping Cart -->
                    <a href="{% url 'books:cart_detail' %}" class="btn btn-outline-light ms-2" title="Shopping Cart">
                        <i class="bi bi-cart3"></i>
                        <span class="badge bg-warning text-dark" id="cart-count">0</span>
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Main Navigation -->
        <nav class="site-nav" role="navigation" aria-label="Main navigation">
            <div class="container">
                <ul class="nav nav-pills">
                    <li class="nav-item">
                        <a class="nav-link text-white" href="{% url 'books:home' %}">
                            <i class="bi bi-house"></i> Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="{% url 'books:book_list' %}">
                            <i class="bi bi-book"></i> Books
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="{% url 'books:news_list' %}">
                            <i class="bi bi-newspaper"></i> News
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="{% url 'books:company_info' %}">
                            <i class="bi bi-building"></i> About Us
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="{% url 'books:contacts' %}">
                            <i class="bi bi-telephone"></i> Contacts
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-grid3x3-gap"></i> More
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'books:vacancies' %}">Vacancies</a></li>
                            <li><a class="dropdown-item" href="{% url 'books:reviews' %}">Reviews</a></li>
                            <li><a class="dropdown-item" href="{% url 'books:promocodes' %}">Promocodes</a></li>
                            <li><a class="dropdown-item" href="{% url 'books:terms_list' %}">Glossary</a></li>
                            <li><a class="dropdown-item" href="{% url 'books:faq' %}">FAQ</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="{% url 'books:privacy_policy' %}">Privacy Policy</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    
    <!-- Breadcrumb Navigation -->
    {% block breadcrumb %}
    <nav class="breadcrumb-nav" aria-label="Breadcrumb navigation">
        <div class="container">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item">
                    <a href="{% url 'books:home' %}">Home</a>
                </li>
                {% block breadcrumb_items %}{% endblock %}
            </ol>
        </div>
    </nav>
    {% endblock %}
    
    <!-- Messages -->
    {% if messages %}
        <div class="container mt-3">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags|default:'info' }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        </div>
    {% endif %}
    
    <!-- Main Content -->
    <main id="main-content" class="main-content" role="main">
        <div class="container">
            {% block content %}{% endblock %}
        </div>
    </main>
    
    <!-- Aside Content (Sidebar) -->
    {% block aside %}{% endblock %}
    
    <!-- Site Footer -->
    <footer class="site-footer" role="contentinfo">
        <div class="container py-5">
            <div class="row">
                <div class="col-md-3 mb-4">
                    <h5>HeavyShop</h5>
                    <p class="small">Your premier online bookstore offering thousands of titles with fast, reliable delivery across Belarus.</p>
                    
                    <!-- Social Media Links -->
                    <div class="social-links">
                        <a href="#" class="text-white me-3" aria-label="Facebook">
                            <i class="bi bi-facebook"></i>
                        </a>
                        <a href="#" class="text-white me-3" aria-label="Twitter">
                            <i class="bi bi-twitter"></i>
                        </a>
                        <a href="#" class="text-white me-3" aria-label="Instagram">
                            <i class="bi bi-instagram"></i>
                        </a>
                        <a href="#" class="text-white" aria-label="LinkedIn">
                            <i class="bi bi-linkedin"></i>
                        </a>
                    </div>
                </div>
                
                <div class="col-md-2 mb-4">
                    <h6>Shop</h6>
                    <ul class="list-unstyled">
                        <li><a href="{% url 'books:book_list' %}" class="text-white-50">All Books</a></li>
                        <li><a href="{% url 'books:promocodes' %}" class="text-white-50">Promocodes</a></li>
                        <li><a href="#" class="text-white-50">New Arrivals</a></li>
                        <li><a href="#" class="text-white-50">Best Sellers</a></li>
                    </ul>
                </div>
                
                <div class="col-md-2 mb-4">
                    <h6>Company</h6>
                    <ul class="list-unstyled">
                        <li><a href="{% url 'books:company_info' %}" class="text-white-50">About Us</a></li>
                        <li><a href="{% url 'books:contacts' %}" class="text-white-50">Contacts</a></li>
                        <li><a href="{% url 'books:vacancies' %}" class="text-white-50">Careers</a></li>
                        <li><a href="{% url 'books:news_list' %}" class="text-white-50">News</a></li>
                    </ul>
                </div>
                
                <div class="col-md-2 mb-4">
                    <h6>Support</h6>
                    <ul class="list-unstyled">
                        <li><a href="{% url 'books:faq' %}" class="text-white-50">FAQ</a></li>
                        <li><a href="{% url 'books:terms_list' %}" class="text-white-50">Glossary</a></li>
                        <li><a href="{% url 'books:privacy_policy' %}" class="text-white-50">Privacy Policy</a></li>
                        <li><a href="#" class="text-white-50">Terms of Service</a></li>
                    </ul>
                </div>
                
                <div class="col-md-3 mb-4">
                    <h6>Contact Information</h6>
                    <address class="small text-white-50">
                        <strong>HeavyShop</strong><br>
                        ул. Примерная, д. 123<br>
                        Минск, Беларусь<br>
                        <abbr title="Phone" class="abbreviation">P:</abbr> +375 (17) 123-45-67<br>
                        <abbr title="Email" class="abbreviation">E:</abbr> info@heavyshop.by
                    </address>
                    
                    <p class="small text-white-50 mb-0">
                        <strong>Working Hours:</strong><br>
                        <time datetime="09:00">9:00 AM</time> - <time datetime="18:00">6:00 PM</time> (Mon-Fri)<br>
                        <time datetime="10:00">10:00 AM</time> - <time datetime="16:00">4:00 PM</time> (Sat)
                    </p>
                </div>
            </div>
            
            <hr class="my-4">
            
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="small mb-0 text-white-50">
                        &copy; <time datetime="{{ current_year }}">{{ current_year }}</time> HeavyShop. All rights reserved.
                    </p>
                </div>
                <div class="col-md-6 text-end">
                    <p class="small mb-0 text-white-50">
                        Made with <i class="bi bi-heart-fill text-danger"></i> for book lovers
                    </p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Back to Top Button -->
    <button type="button" 
            class="btn btn-primary position-fixed bottom-0 end-0 m-3" 
            id="back-to-top" 
            style="display: none; z-index: 1000;"
            aria-label="Back to top">
        <i class="bi bi-arrow-up"></i>
    </button>
    
    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Back to top button functionality
        window.addEventListener('scroll', function() {
            const backToTopButton = document.getElementById('back-to-top');
            if (window.scrollY > 300) {
                backToTopButton.style.display = 'block';
            } else {
                backToTopButton.style.display = 'none';
            }
        });
        
        document.getElementById('back-to-top').addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // Form validation enhancement
        (function() {
            'use strict';
            const forms = document.querySelectorAll('.needs-validation');
            
            Array.prototype.slice.call(forms).forEach(function(form) {
                form.addEventListener('submit', function(event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        })();
        
        // Cart count update (placeholder)
        function updateCartCount() {
            // This would typically make an API call to get the cart count
            // For now, we'll use a placeholder
            const cartCount = document.getElementById('cart-count');
            if (cartCount) {
                // Example: cartCount.textContent = '3';
            }
        }
        
        // Initialize cart count on page load
        document.addEventListener('DOMContentLoaded', updateCartCount);
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>